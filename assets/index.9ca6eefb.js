const ye=function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const m of s)if(m.type==="childList")for(const A of m.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&o(A)}).observe(document,{childList:!0,subtree:!0});function p(s){const m={};return s.integrity&&(m.integrity=s.integrity),s.referrerpolicy&&(m.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?m.credentials="include":s.crossorigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(s){if(s.ep)return;s.ep=!0;const m=p(s);fetch(s.href,m)}};ye();(function(){function u(d,p,o){function s(b,U){if(!p[b]){if(!d[b]){var _=typeof require=="function"&&require;if(!U&&_)return _(b,!0);if(m)return m(b,!0);var $=new Error("Cannot find module '"+b+"'");throw $.code="MODULE_NOT_FOUND",$}var z=p[b]={exports:{}};d[b][0].call(z.exports,function(xr){var er=d[b][1][xr];return s(er||xr)},z,z.exports,u,d,p,o)}return p[b].exports}for(var m=typeof require=="function"&&require,A=0;A<o.length;A++)s(o[A]);return s}return u})()({1:[function(u,d,p){p.byteLength=$,p.toByteArray=xr,p.fromByteArray=vr;for(var o=[],s=[],m=typeof Uint8Array!="undefined"?Uint8Array:Array,A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=0,U=A.length;b<U;++b)o[b]=A[b],s[A.charCodeAt(b)]=b;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63;function _(D){var B=D.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ar=D.indexOf("=");ar===-1&&(ar=B);var cr=ar===B?0:4-ar%4;return[ar,cr]}function $(D){var B=_(D),ar=B[0],cr=B[1];return(ar+cr)*3/4-cr}function z(D,B,ar){return(B+ar)*3/4-ar}function xr(D){for(var B,ar=_(D),cr=ar[0],sr=ar[1],N=new m(z(D,cr,sr)),F=0,w=sr>0?cr-4:cr,g=0;g<w;g+=4)B=s[D.charCodeAt(g)]<<18|s[D.charCodeAt(g+1)]<<12|s[D.charCodeAt(g+2)]<<6|s[D.charCodeAt(g+3)],N[F++]=B>>16&255,N[F++]=B>>8&255,N[F++]=B&255;return sr===2&&(B=s[D.charCodeAt(g)]<<2|s[D.charCodeAt(g+1)]>>4,N[F++]=B&255),sr===1&&(B=s[D.charCodeAt(g)]<<10|s[D.charCodeAt(g+1)]<<4|s[D.charCodeAt(g+2)]>>2,N[F++]=B>>8&255,N[F++]=B&255),N}function er(D){return o[D>>18&63]+o[D>>12&63]+o[D>>6&63]+o[D&63]}function ir(D,B,ar){for(var cr,sr=[],N=B;N<ar;N+=3)cr=(D[N]<<16&16711680)+(D[N+1]<<8&65280)+(D[N+2]&255),sr.push(er(cr));return sr.join("")}function vr(D){for(var B,ar=D.length,cr=ar%3,sr=[],N=16383,F=0,w=ar-cr;F<w;F+=N)sr.push(ir(D,F,F+N>w?w:F+N));return cr===1?(B=D[ar-1],sr.push(o[B>>2]+o[B<<4&63]+"==")):cr===2&&(B=(D[ar-2]<<8)+D[ar-1],sr.push(o[B>>10]+o[B>>4&63]+o[B<<2&63]+"=")),sr.join("")}},{}],2:[function(u,d,p){(function(o){var s=u("base64-js"),m=u("ieee754");p.Buffer=o,p.SlowBuffer=ar,p.INSPECT_MAX_BYTES=50;var A=2147483647;p.kMaxLength=A,o.TYPED_ARRAY_SUPPORT=b(),!o.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function b(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},t.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.byteOffset}});function U(t){if(t>A)throw new RangeError('The value "'+t+'" is invalid for option "size"');var r=new Uint8Array(t);return r.__proto__=o.prototype,r}function o(t,r,e){if(typeof t=="number"){if(typeof r=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return xr(t)}return _(t,r,e)}typeof Symbol!="undefined"&&Symbol.species!=null&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192;function _(t,r,e){if(typeof t=="string")return er(t,r);if(ArrayBuffer.isView(t))return ir(t);if(t==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(x(t,ArrayBuffer)||t&&x(t.buffer,ArrayBuffer))return vr(t,r,e);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return o.from(n,r,e);var i=D(t);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return o.from(t[Symbol.toPrimitive]("string"),r,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}o.from=function(t,r,e){return _(t,r,e)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array;function $(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function z(t,r,e){return $(t),t<=0?U(t):r!==void 0?typeof e=="string"?U(t).fill(r,e):U(t).fill(r):U(t)}o.alloc=function(t,r,e){return z(t,r,e)};function xr(t){return $(t),U(t<0?0:B(t)|0)}o.allocUnsafe=function(t){return xr(t)},o.allocUnsafeSlow=function(t){return xr(t)};function er(t,r){if((typeof r!="string"||r==="")&&(r="utf8"),!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var e=cr(t,r)|0,n=U(e),i=n.write(t,r);return i!==e&&(n=n.slice(0,i)),n}function ir(t){for(var r=t.length<0?0:B(t.length)|0,e=U(r),n=0;n<r;n+=1)e[n]=t[n]&255;return e}function vr(t,r,e){if(r<0||t.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<r+(e||0))throw new RangeError('"length" is outside of buffer bounds');var n;return r===void 0&&e===void 0?n=new Uint8Array(t):e===void 0?n=new Uint8Array(t,r):n=new Uint8Array(t,r,e),n.__proto__=o.prototype,n}function D(t){if(o.isBuffer(t)){var r=B(t.length)|0,e=U(r);return e.length===0||t.copy(e,0,0,r),e}if(t.length!==void 0)return typeof t.length!="number"||Z(t.length)?U(0):ir(t);if(t.type==="Buffer"&&Array.isArray(t.data))return ir(t.data)}function B(t){if(t>=A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A.toString(16)+" bytes");return t|0}function ar(t){return+t!=t&&(t=0),o.alloc(+t)}o.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==o.prototype},o.compare=function(r,e){if(x(r,Uint8Array)&&(r=o.from(r,r.offset,r.byteLength)),x(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(r)||!o.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===e)return 0;for(var n=r.length,i=e.length,a=0,c=Math.min(n,i);a<c;++a)if(r[a]!==e[a]){n=r[a],i=e[a];break}return n<i?-1:i<n?1:0},o.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(r,e){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return o.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<r.length;++n)e+=r[n].length;var i=o.allocUnsafe(e),a=0;for(n=0;n<r.length;++n){var c=r[n];if(x(c,Uint8Array)&&(c=o.from(c)),!o.isBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(i,a),a+=c.length}return i};function cr(t,r){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||x(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var e=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&e===0)return 0;for(var i=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return tr(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return O(t).length;default:if(i)return n?-1:tr(t).length;r=(""+r).toLowerCase(),i=!0}}o.byteLength=cr;function sr(t,r,e){var n=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,r>>>=0,e<=r))return"";for(t||(t="utf8");;)switch(t){case"hex":return H(this,r,e);case"utf8":case"utf-8":return or(this,r,e);case"ascii":return V(this,r,e);case"latin1":case"binary":return R(this,r,e);case"base64":return Q(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}o.prototype._isBuffer=!0;function N(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}o.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<r;e+=2)N(this,e,e+1);return this},o.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<r;e+=4)N(this,e,e+3),N(this,e+1,e+2);return this},o.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<r;e+=8)N(this,e,e+7),N(this,e+1,e+6),N(this,e+2,e+5),N(this,e+3,e+4);return this},o.prototype.toString=function(){var r=this.length;return r===0?"":arguments.length===0?or(this,0,r):sr.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(r){if(!o.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:o.compare(this,r)===0},o.prototype.inspect=function(){var r="",e=p.INSPECT_MAX_BYTES;return r=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(r+=" ... "),"<Buffer "+r+">"},o.prototype.compare=function(r,e,n,i,a){if(x(r,Uint8Array)&&(r=o.from(r,r.offset,r.byteLength)),!o.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(e===void 0&&(e=0),n===void 0&&(n=r?r.length:0),i===void 0&&(i=0),a===void 0&&(a=this.length),e<0||n>r.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&e>=n)return 0;if(i>=a)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,a>>>=0,this===r)return 0;for(var c=a-i,E=n-e,h=Math.min(c,E),v=this.slice(i,a),l=r.slice(e,n),k=0;k<h;++k)if(v[k]!==l[k]){c=v[k],E=l[k];break}return c<E?-1:E<c?1:0};function F(t,r,e,n,i){if(t.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,Z(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0)if(i)e=0;else return-1;if(typeof r=="string"&&(r=o.from(r,n)),o.isBuffer(r))return r.length===0?-1:w(t,r,e,n,i);if(typeof r=="number")return r=r&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):w(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function w(t,r,e,n,i){var a=1,c=t.length,E=r.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||r.length<2)return-1;a=2,c/=2,E/=2,e/=2}function h(y,G){return a===1?y[G]:y.readUInt16BE(G*a)}var v;if(i){var l=-1;for(v=e;v<c;v++)if(h(t,v)===h(r,l===-1?0:v-l)){if(l===-1&&(l=v),v-l+1===E)return l*a}else l!==-1&&(v-=v-l),l=-1}else for(e+E>c&&(e=c-E),v=e;v>=0;v--){for(var k=!0,M=0;M<E;M++)if(h(t,v+M)!==h(r,M)){k=!1;break}if(k)return v}return-1}o.prototype.includes=function(r,e,n){return this.indexOf(r,e,n)!==-1},o.prototype.indexOf=function(r,e,n){return F(this,r,e,n,!0)},o.prototype.lastIndexOf=function(r,e,n){return F(this,r,e,n,!1)};function g(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n),n>i&&(n=i)):n=i;var a=r.length;n>a/2&&(n=a/2);for(var c=0;c<n;++c){var E=parseInt(r.substr(c*2,2),16);if(Z(E))return c;t[e+c]=E}return c}function P(t,r,e,n){return C(tr(r,t.length-e),t,e,n)}function W(t,r,e,n){return C(j(r),t,e,n)}function L(t,r,e,n){return W(t,r,e,n)}function S(t,r,e,n){return C(O(r),t,e,n)}function I(t,r,e,n){return C(ur(r,t.length-e),t,e,n)}o.prototype.write=function(r,e,n,i){if(e===void 0)i="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")i=e,n=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var a=this.length-e;if((n===void 0||n>a)&&(n=a),r.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var c=!1;;)switch(i){case"hex":return g(this,r,e,n);case"utf8":case"utf-8":return P(this,r,e,n);case"ascii":return W(this,r,e,n);case"latin1":case"binary":return L(this,r,e,n);case"base64":return S(this,r,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,r,e,n);default:if(c)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),c=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Q(t,r,e){return r===0&&e===t.length?s.fromByteArray(t):s.fromByteArray(t.slice(r,e))}function or(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var a=t[i],c=null,E=a>239?4:a>223?3:a>191?2:1;if(i+E<=e){var h,v,l,k;switch(E){case 1:a<128&&(c=a);break;case 2:h=t[i+1],(h&192)==128&&(k=(a&31)<<6|h&63,k>127&&(c=k));break;case 3:h=t[i+1],v=t[i+2],(h&192)==128&&(v&192)==128&&(k=(a&15)<<12|(h&63)<<6|v&63,k>2047&&(k<55296||k>57343)&&(c=k));break;case 4:h=t[i+1],v=t[i+2],l=t[i+3],(h&192)==128&&(v&192)==128&&(l&192)==128&&(k=(a&15)<<18|(h&63)<<12|(v&63)<<6|l&63,k>65535&&k<1114112&&(c=k))}}c===null?(c=65533,E=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|c&1023),n.push(c),i+=E}return lr(n)}var rr=4096;function lr(t){var r=t.length;if(r<=rr)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=rr));return e}function V(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]&127);return n}function R(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function H(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",a=r;a<e;++a)i+=X(t[a]);return i}function Y(t,r,e){for(var n=t.slice(r,e),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+n[a+1]*256);return i}o.prototype.slice=function(r,e){var n=this.length;r=~~r,e=e===void 0?n:~~e,r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<r&&(e=r);var i=this.subarray(r,e);return i.__proto__=o.prototype,i};function T(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUIntLE=function(r,e,n){r=r>>>0,e=e>>>0,n||T(r,e,this.length);for(var i=this[r],a=1,c=0;++c<e&&(a*=256);)i+=this[r+c]*a;return i},o.prototype.readUIntBE=function(r,e,n){r=r>>>0,e=e>>>0,n||T(r,e,this.length);for(var i=this[r+--e],a=1;e>0&&(a*=256);)i+=this[r+--e]*a;return i},o.prototype.readUInt8=function(r,e){return r=r>>>0,e||T(r,1,this.length),this[r]},o.prototype.readUInt16LE=function(r,e){return r=r>>>0,e||T(r,2,this.length),this[r]|this[r+1]<<8},o.prototype.readUInt16BE=function(r,e){return r=r>>>0,e||T(r,2,this.length),this[r]<<8|this[r+1]},o.prototype.readUInt32LE=function(r,e){return r=r>>>0,e||T(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216},o.prototype.readUInt32BE=function(r,e){return r=r>>>0,e||T(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])},o.prototype.readIntLE=function(r,e,n){r=r>>>0,e=e>>>0,n||T(r,e,this.length);for(var i=this[r],a=1,c=0;++c<e&&(a*=256);)i+=this[r+c]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*e)),i},o.prototype.readIntBE=function(r,e,n){r=r>>>0,e=e>>>0,n||T(r,e,this.length);for(var i=e,a=1,c=this[r+--i];i>0&&(a*=256);)c+=this[r+--i]*a;return a*=128,c>=a&&(c-=Math.pow(2,8*e)),c},o.prototype.readInt8=function(r,e){return r=r>>>0,e||T(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]},o.prototype.readInt16LE=function(r,e){r=r>>>0,e||T(r,2,this.length);var n=this[r]|this[r+1]<<8;return n&32768?n|4294901760:n},o.prototype.readInt16BE=function(r,e){r=r>>>0,e||T(r,2,this.length);var n=this[r+1]|this[r]<<8;return n&32768?n|4294901760:n},o.prototype.readInt32LE=function(r,e){return r=r>>>0,e||T(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},o.prototype.readInt32BE=function(r,e){return r=r>>>0,e||T(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},o.prototype.readFloatLE=function(r,e){return r=r>>>0,e||T(r,4,this.length),m.read(this,r,!0,23,4)},o.prototype.readFloatBE=function(r,e){return r=r>>>0,e||T(r,4,this.length),m.read(this,r,!1,23,4)},o.prototype.readDoubleLE=function(r,e){return r=r>>>0,e||T(r,8,this.length),m.read(this,r,!0,52,8)},o.prototype.readDoubleBE=function(r,e){return r=r>>>0,e||T(r,8,this.length),m.read(this,r,!1,52,8)};function nr(t,r,e,n,i,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<a)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}o.prototype.writeUIntLE=function(r,e,n,i){if(r=+r,e=e>>>0,n=n>>>0,!i){var a=Math.pow(2,8*n)-1;nr(this,r,e,n,a,0)}var c=1,E=0;for(this[e]=r&255;++E<n&&(c*=256);)this[e+E]=r/c&255;return e+n},o.prototype.writeUIntBE=function(r,e,n,i){if(r=+r,e=e>>>0,n=n>>>0,!i){var a=Math.pow(2,8*n)-1;nr(this,r,e,n,a,0)}var c=n-1,E=1;for(this[e+c]=r&255;--c>=0&&(E*=256);)this[e+c]=r/E&255;return e+n},o.prototype.writeUInt8=function(r,e,n){return r=+r,e=e>>>0,n||nr(this,r,e,1,255,0),this[e]=r&255,e+1},o.prototype.writeUInt16LE=function(r,e,n){return r=+r,e=e>>>0,n||nr(this,r,e,2,65535,0),this[e]=r&255,this[e+1]=r>>>8,e+2},o.prototype.writeUInt16BE=function(r,e,n){return r=+r,e=e>>>0,n||nr(this,r,e,2,65535,0),this[e]=r>>>8,this[e+1]=r&255,e+2},o.prototype.writeUInt32LE=function(r,e,n){return r=+r,e=e>>>0,n||nr(this,r,e,4,4294967295,0),this[e+3]=r>>>24,this[e+2]=r>>>16,this[e+1]=r>>>8,this[e]=r&255,e+4},o.prototype.writeUInt32BE=function(r,e,n){return r=+r,e=e>>>0,n||nr(this,r,e,4,4294967295,0),this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=r&255,e+4},o.prototype.writeIntLE=function(r,e,n,i){if(r=+r,e=e>>>0,!i){var a=Math.pow(2,8*n-1);nr(this,r,e,n,a-1,-a)}var c=0,E=1,h=0;for(this[e]=r&255;++c<n&&(E*=256);)r<0&&h===0&&this[e+c-1]!==0&&(h=1),this[e+c]=(r/E>>0)-h&255;return e+n},o.prototype.writeIntBE=function(r,e,n,i){if(r=+r,e=e>>>0,!i){var a=Math.pow(2,8*n-1);nr(this,r,e,n,a-1,-a)}var c=n-1,E=1,h=0;for(this[e+c]=r&255;--c>=0&&(E*=256);)r<0&&h===0&&this[e+c+1]!==0&&(h=1),this[e+c]=(r/E>>0)-h&255;return e+n},o.prototype.writeInt8=function(r,e,n){return r=+r,e=e>>>0,n||nr(this,r,e,1,127,-128),r<0&&(r=255+r+1),this[e]=r&255,e+1},o.prototype.writeInt16LE=function(r,e,n){return r=+r,e=e>>>0,n||nr(this,r,e,2,32767,-32768),this[e]=r&255,this[e+1]=r>>>8,e+2},o.prototype.writeInt16BE=function(r,e,n){return r=+r,e=e>>>0,n||nr(this,r,e,2,32767,-32768),this[e]=r>>>8,this[e+1]=r&255,e+2},o.prototype.writeInt32LE=function(r,e,n){return r=+r,e=e>>>0,n||nr(this,r,e,4,2147483647,-2147483648),this[e]=r&255,this[e+1]=r>>>8,this[e+2]=r>>>16,this[e+3]=r>>>24,e+4},o.prototype.writeInt32BE=function(r,e,n){return r=+r,e=e>>>0,n||nr(this,r,e,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=r&255,e+4};function gr(t,r,e,n,i,a){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function yr(t,r,e,n,i){return r=+r,e=e>>>0,i||gr(t,r,e,4),m.write(t,r,e,n,23,4),e+4}o.prototype.writeFloatLE=function(r,e,n){return yr(this,r,e,!0,n)},o.prototype.writeFloatBE=function(r,e,n){return yr(this,r,e,!1,n)};function K(t,r,e,n,i){return r=+r,e=e>>>0,i||gr(t,r,e,8),m.write(t,r,e,n,52,8),e+8}o.prototype.writeDoubleLE=function(r,e,n){return K(this,r,e,!0,n)},o.prototype.writeDoubleBE=function(r,e,n){return K(this,r,e,!1,n)},o.prototype.copy=function(r,e,n,i){if(!o.isBuffer(r))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),e>=r.length&&(e=r.length),e||(e=0),i>0&&i<n&&(i=n),i===n||r.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),r.length-e<i-n&&(i=r.length-e+n);var a=i-n;if(this===r&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(e,n,i);else if(this===r&&n<e&&e<i)for(var c=a-1;c>=0;--c)r[c+e]=this[c+n];else Uint8Array.prototype.set.call(r,this.subarray(n,i),e);return a},o.prototype.fill=function(r,e,n,i){if(typeof r=="string"){if(typeof e=="string"?(i=e,e=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!o.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(r.length===1){var a=r.charCodeAt(0);(i==="utf8"&&a<128||i==="latin1")&&(r=a)}}else typeof r=="number"&&(r=r&255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,r||(r=0);var c;if(typeof r=="number")for(c=e;c<n;++c)this[c]=r;else{var E=o.isBuffer(r)?r:o.from(r,i),h=E.length;if(h===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(c=0;c<n-e;++c)this[c+e]=E[c%h]}return this};var J=/[^+/0-9A-Za-z-_]/g;function f(t){if(t=t.split("=")[0],t=t.trim().replace(J,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function X(t){return t<16?"0"+t.toString(16):t.toString(16)}function tr(t,r){r=r||1/0;for(var e,n=t.length,i=null,a=[],c=0;c<n;++c){if(e=t.charCodeAt(c),e>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&a.push(239,191,189);continue}else if(c+1===n){(r-=3)>-1&&a.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&a.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(r-=3)>-1&&a.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;a.push(e)}else if(e<2048){if((r-=2)<0)break;a.push(e>>6|192,e&63|128)}else if(e<65536){if((r-=3)<0)break;a.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((r-=4)<0)break;a.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return a}function j(t){for(var r=[],e=0;e<t.length;++e)r.push(t.charCodeAt(e)&255);return r}function ur(t,r){for(var e,n,i,a=[],c=0;c<t.length&&!((r-=2)<0);++c)e=t.charCodeAt(c),n=e>>8,i=e%256,a.push(i),a.push(n);return a}function O(t){return s.toByteArray(f(t))}function C(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function x(t,r){return t instanceof r||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===r.name}function Z(t){return t!==t}}).call(this,u("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:3}],3:[function(u,d,p){p.read=function(o,s,m,A,b){var U,_,$=b*8-A-1,z=(1<<$)-1,xr=z>>1,er=-7,ir=m?b-1:0,vr=m?-1:1,D=o[s+ir];for(ir+=vr,U=D&(1<<-er)-1,D>>=-er,er+=$;er>0;U=U*256+o[s+ir],ir+=vr,er-=8);for(_=U&(1<<-er)-1,U>>=-er,er+=A;er>0;_=_*256+o[s+ir],ir+=vr,er-=8);if(U===0)U=1-xr;else{if(U===z)return _?NaN:(D?-1:1)*(1/0);_=_+Math.pow(2,A),U=U-xr}return(D?-1:1)*_*Math.pow(2,U-A)},p.write=function(o,s,m,A,b,U){var _,$,z,xr=U*8-b-1,er=(1<<xr)-1,ir=er>>1,vr=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=A?0:U-1,B=A?1:-1,ar=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?($=isNaN(s)?1:0,_=er):(_=Math.floor(Math.log(s)/Math.LN2),s*(z=Math.pow(2,-_))<1&&(_--,z*=2),_+ir>=1?s+=vr/z:s+=vr*Math.pow(2,1-ir),s*z>=2&&(_++,z/=2),_+ir>=er?($=0,_=er):_+ir>=1?($=(s*z-1)*Math.pow(2,b),_=_+ir):($=s*Math.pow(2,ir-1)*Math.pow(2,b),_=0));b>=8;o[m+D]=$&255,D+=B,$/=256,b-=8);for(_=_<<b|$,xr+=b;xr>0;o[m+D]=_&255,D+=B,_/=256,xr-=8);o[m+D-B]|=ar*128}},{}],4:[function(u,d,p){var o=u("jpeg-js");window.jpeg=o},{"jpeg-js":5}],5:[function(u,d,p){var o=u("./lib/encoder"),s=u("./lib/decoder");d.exports={encode:o,decode:s}},{"./lib/decoder":6,"./lib/encoder":7}],6:[function(u,d,p){(function(o){var s=function(){var b=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),U=4017,_=799,$=3406,z=2276,xr=1567,er=3784,ir=5793,vr=2896;function D(){}function B(N,F){for(var w=0,g=[],P,W,L=16;L>0&&!N[L-1];)L--;g.push({children:[],index:0});var S=g[0],I;for(P=0;P<L;P++){for(W=0;W<N[P];W++){for(S=g.pop(),S.children[S.index]=F[w];S.index>0;)S=g.pop();for(S.index++,g.push(S);g.length<=P;)g.push(I={children:[],index:0}),S.children[S.index]=I.children,S=I;w++}P+1<L&&(g.push(I={children:[],index:0}),S.children[S.index]=I.children,S=I)}return g[0].children}function ar(N,F,w,g,P,W,L,S,I){w.precision,w.samplesPerLine,w.scanLines;var Q=w.mcusPerLine,or=w.progressive;w.maxH,w.maxV;var rr=F,lr=0,V=0;function R(){if(V>0)return V--,lr>>V&1;if(lr=N[F++],lr==255){var h=N[F++];if(h)throw new Error("unexpected marker: "+(lr<<8|h).toString(16))}return V=7,lr>>>7}function H(h){for(var v=h,l;(l=R())!==null;){if(v=v[l],typeof v=="number")return v;if(typeof v!="object")throw new Error("invalid huffman sequence")}return null}function Y(h){for(var v=0;h>0;){var l=R();if(l===null)return;v=v<<1|l,h--}return v}function T(h){var v=Y(h);return v>=1<<h-1?v:v+(-1<<h)+1}function nr(h,v){var l=H(h.huffmanTableDC),k=l===0?0:T(l);v[0]=h.pred+=k;for(var M=1;M<64;){var y=H(h.huffmanTableAC),G=y&15,hr=y>>4;if(G===0){if(hr<15)break;M+=16;continue}M+=hr;var pr=b[M];v[pr]=T(G),M++}}function gr(h,v){var l=H(h.huffmanTableDC),k=l===0?0:T(l)<<I;v[0]=h.pred+=k}function yr(h,v){v[0]|=R()<<I}var K=0;function J(h,v){if(K>0){K--;return}for(var l=W,k=L;l<=k;){var M=H(h.huffmanTableAC),y=M&15,G=M>>4;if(y===0){if(G<15){K=Y(G)+(1<<G)-1;break}l+=16;continue}l+=G;var hr=b[l];v[hr]=T(y)*(1<<I),l++}}var f=0,X;function tr(h,v){for(var l=W,k=L,M=0;l<=k;){var y=b[l],G=v[y]<0?-1:1;switch(f){case 0:var hr=H(h.huffmanTableAC),pr=hr&15,M=hr>>4;if(pr===0)M<15?(K=Y(M)+(1<<M),f=4):(M=16,f=1);else{if(pr!==1)throw new Error("invalid ACn encoding");X=T(pr),f=M?2:3}continue;case 1:case 2:v[y]?v[y]+=(R()<<I)*G:(M--,M===0&&(f=f==2?3:0));break;case 3:v[y]?v[y]+=(R()<<I)*G:(v[y]=X<<I,f=0);break;case 4:v[y]&&(v[y]+=(R()<<I)*G);break}l++}f===4&&(K--,K===0&&(f=0))}function j(h,v,l,k,M){var y=l/Q|0,G=l%Q,hr=y*h.v+k,pr=G*h.h+M;v(h,h.blocks[hr][pr])}function ur(h,v,l){var k=l/h.blocksPerLine|0,M=l%h.blocksPerLine;v(h,h.blocks[k][M])}var O=g.length,C,x,Z,t,r,e;or?W===0?e=S===0?gr:yr:e=S===0?J:tr:e=nr;var n=0,i,a;O==1?a=g[0].blocksPerLine*g[0].blocksPerColumn:a=Q*w.mcusPerColumn,P||(P=a);for(var c,E;n<a;){for(x=0;x<O;x++)g[x].pred=0;if(K=0,O==1)for(C=g[0],r=0;r<P;r++)ur(C,e,n),n++;else for(r=0;r<P;r++){for(x=0;x<O;x++)for(C=g[x],c=C.h,E=C.v,Z=0;Z<E;Z++)for(t=0;t<c;t++)j(C,e,n,Z,t);if(n++,n===a)break}if(V=0,i=N[F]<<8|N[F+1],i<65280)throw new Error("marker was not found");if(i>=65488&&i<=65495)F+=2;else break}return F-rr}function cr(N,F){var w=[],g=F.blocksPerLine,P=F.blocksPerColumn,W=g<<3,L=new Int32Array(64),S=new Uint8Array(64);function I(T,nr,gr){var yr=F.quantizationTable,K,J,f,X,tr,j,ur,O,C,x=gr,Z;for(Z=0;Z<64;Z++)x[Z]=T[Z]*yr[Z];for(Z=0;Z<8;++Z){var t=8*Z;if(x[1+t]==0&&x[2+t]==0&&x[3+t]==0&&x[4+t]==0&&x[5+t]==0&&x[6+t]==0&&x[7+t]==0){C=ir*x[0+t]+512>>10,x[0+t]=C,x[1+t]=C,x[2+t]=C,x[3+t]=C,x[4+t]=C,x[5+t]=C,x[6+t]=C,x[7+t]=C;continue}K=ir*x[0+t]+128>>8,J=ir*x[4+t]+128>>8,f=x[2+t],X=x[6+t],tr=vr*(x[1+t]-x[7+t])+128>>8,O=vr*(x[1+t]+x[7+t])+128>>8,j=x[3+t]<<4,ur=x[5+t]<<4,C=K-J+1>>1,K=K+J+1>>1,J=C,C=f*er+X*xr+128>>8,f=f*xr-X*er+128>>8,X=C,C=tr-ur+1>>1,tr=tr+ur+1>>1,ur=C,C=O+j+1>>1,j=O-j+1>>1,O=C,C=K-X+1>>1,K=K+X+1>>1,X=C,C=J-f+1>>1,J=J+f+1>>1,f=C,C=tr*z+O*$+2048>>12,tr=tr*$-O*z+2048>>12,O=C,C=j*_+ur*U+2048>>12,j=j*U-ur*_+2048>>12,ur=C,x[0+t]=K+O,x[7+t]=K-O,x[1+t]=J+ur,x[6+t]=J-ur,x[2+t]=f+j,x[5+t]=f-j,x[3+t]=X+tr,x[4+t]=X-tr}for(Z=0;Z<8;++Z){var r=Z;if(x[1*8+r]==0&&x[2*8+r]==0&&x[3*8+r]==0&&x[4*8+r]==0&&x[5*8+r]==0&&x[6*8+r]==0&&x[7*8+r]==0){C=ir*gr[Z+0]+8192>>14,x[0*8+r]=C,x[1*8+r]=C,x[2*8+r]=C,x[3*8+r]=C,x[4*8+r]=C,x[5*8+r]=C,x[6*8+r]=C,x[7*8+r]=C;continue}K=ir*x[0*8+r]+2048>>12,J=ir*x[4*8+r]+2048>>12,f=x[2*8+r],X=x[6*8+r],tr=vr*(x[1*8+r]-x[7*8+r])+2048>>12,O=vr*(x[1*8+r]+x[7*8+r])+2048>>12,j=x[3*8+r],ur=x[5*8+r],C=K-J+1>>1,K=K+J+1>>1,J=C,C=f*er+X*xr+2048>>12,f=f*xr-X*er+2048>>12,X=C,C=tr-ur+1>>1,tr=tr+ur+1>>1,ur=C,C=O+j+1>>1,j=O-j+1>>1,O=C,C=K-X+1>>1,K=K+X+1>>1,X=C,C=J-f+1>>1,J=J+f+1>>1,f=C,C=tr*z+O*$+2048>>12,tr=tr*$-O*z+2048>>12,O=C,C=j*_+ur*U+2048>>12,j=j*U-ur*_+2048>>12,ur=C,x[0*8+r]=K+O,x[7*8+r]=K-O,x[1*8+r]=J+ur,x[6*8+r]=J-ur,x[2*8+r]=f+j,x[5*8+r]=f-j,x[3*8+r]=X+tr,x[4*8+r]=X-tr}for(Z=0;Z<64;++Z){var e=128+(x[Z]+8>>4);nr[Z]=e<0?0:e>255?255:e}}for(var Q,or,rr=0;rr<P;rr++){var lr=rr<<3;for(Q=0;Q<8;Q++)w.push(new Uint8Array(W));for(var V=0;V<g;V++){I(F.blocks[rr][V],S,L);var R=0,H=V<<3;for(or=0;or<8;or++){var Y=w[lr+or];for(Q=0;Q<8;Q++)Y[H+Q]=S[R++]}}}return w}function sr(N){return N<0?0:N>255?255:N}return D.prototype={buildComponentData:cr,load:function(F){var w=new XMLHttpRequest;w.open("GET",F,!0),w.responseType="arraybuffer",w.onload=function(){var g=new Uint8Array(w.response||w.mozResponseArrayBuffer);this.parse(g),this.onload&&this.onload()}.bind(this),w.send(null)},parse:function(F){var w=0;F.length;function g(){var l=F[w]<<8|F[w+1];return w+=2,l}function P(){var l=g(),k=F.subarray(w,w+l-2);return w+=k.length,k}function W(l){var k=0,M=0,y,G;for(G in l.components)l.components.hasOwnProperty(G)&&(y=l.components[G],k<y.h&&(k=y.h),M<y.v&&(M=y.v));var hr=Math.ceil(l.samplesPerLine/8/k),pr=Math.ceil(l.scanLines/8/M);for(G in l.components)if(l.components.hasOwnProperty(G)){y=l.components[G];for(var Fr=Math.ceil(Math.ceil(l.samplesPerLine/8)*y.h/k),fr=Math.ceil(Math.ceil(l.scanLines/8)*y.v/M),Er=hr*y.h,Ar=pr*y.v,dr=[],br=0;br<Ar;br++){for(var Ir=[],Lr=0;Lr<Er;Lr++)Ir.push(new Int32Array(64));dr.push(Ir)}y.blocksPerLine=Fr,y.blocksPerColumn=fr,y.blocks=dr}l.maxH=k,l.maxV=M,l.mcusPerLine=hr,l.mcusPerColumn=pr}var L=null,S=null,I,Q,or=[],rr=[],lr=[],V=[],R=g();if(R!=65496)throw new Error("SOI not found");for(this.frames=rr,R=g();R!=65497;){var H,Y;switch(R){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var T=P();R===65504&&T[0]===74&&T[1]===70&&T[2]===73&&T[3]===70&&T[4]===0&&(L={version:{major:T[5],minor:T[6]},densityUnits:T[7],xDensity:T[8]<<8|T[9],yDensity:T[10]<<8|T[11],thumbWidth:T[12],thumbHeight:T[13],thumbData:T.subarray(14,14+3*T[12]*T[13])}),R===65518&&T[0]===65&&T[1]===100&&T[2]===111&&T[3]===98&&T[4]===101&&T[5]===0&&(S={version:T[6],flags0:T[7]<<8|T[8],flags1:T[9]<<8|T[10],transformCode:T[11]});break;case 65499:for(var nr=g(),gr=nr+w-2;w<gr;){var yr=F[w++],K=new Int32Array(64);if(yr>>4==0)for(Y=0;Y<64;Y++){var J=b[Y];K[J]=F[w++]}else if(yr>>4==1)for(Y=0;Y<64;Y++){var J=b[Y];K[J]=g()}else throw new Error("DQT: invalid table spec");or[yr&15]=K}break;case 65472:case 65473:case 65474:g(),I={},I.extended=R===65473,I.progressive=R===65474,I.precision=F[w++],I.scanLines=g(),I.samplesPerLine=g(),I.components={},I.componentsOrder=[];var f=F[w++],X;for(H=0;H<f;H++){X=F[w];var tr=F[w+1]>>4,j=F[w+1]&15,ur=F[w+2];I.componentsOrder.push(X),I.components[X]={h:tr,v:j,quantizationIdx:ur},w+=3}W(I),rr.push(I);break;case 65476:var O=g();for(H=2;H<O;){var C=F[w++],x=new Uint8Array(16),Z=0;for(Y=0;Y<16;Y++,w++)Z+=x[Y]=F[w];var t=new Uint8Array(Z);for(Y=0;Y<Z;Y++,w++)t[Y]=F[w];H+=17+Z,(C>>4==0?V:lr)[C&15]=B(x,t)}break;case 65501:g(),Q=g();break;case 65498:g();var r=F[w++],e=[],n;for(H=0;H<r;H++){n=I.components[F[w++]];var i=F[w++];n.huffmanTableDC=V[i>>4],n.huffmanTableAC=lr[i&15],e.push(n)}var a=F[w++],c=F[w++],E=F[w++],h=ar(F,w,I,e,Q,a,c,E>>4,E&15);w+=h;break;case 65535:F[w]!==255&&w--;break;default:if(F[w-3]==255&&F[w-2]>=192&&F[w-2]<=254){w-=3;break}throw new Error("unknown JPEG marker "+R.toString(16))}R=g()}if(rr.length!=1)throw new Error("only single frame JPEGs supported");for(var H=0;H<rr.length;H++){var v=rr[H].components;for(var Y in v)v[Y].quantizationTable=or[v[Y].quantizationIdx],delete v[Y].quantizationIdx}this.width=I.samplesPerLine,this.height=I.scanLines,this.jfif=L,this.adobe=S,this.components=[];for(var H=0;H<I.componentsOrder.length;H++){var n=I.components[I.componentsOrder[H]];this.components.push({lines:cr(I,n),scaleX:n.h/I.maxH,scaleY:n.v/I.maxV})}},getData:function(F,w){var g=this.width/F,P=this.height/w,W,L,S,I,Q,or,rr,lr,V,R,H=0,Y,T,nr,gr,yr,K,J,f,X,tr,j,ur=F*w*this.components.length,O=new Uint8Array(ur);switch(this.components.length){case 1:for(W=this.components[0],R=0;R<w;R++)for(Q=W.lines[0|R*W.scaleY*P],V=0;V<F;V++)Y=Q[0|V*W.scaleX*g],O[H++]=Y;break;case 2:for(W=this.components[0],L=this.components[1],R=0;R<w;R++)for(Q=W.lines[0|R*W.scaleY*P],or=L.lines[0|R*L.scaleY*P],V=0;V<F;V++)Y=Q[0|V*W.scaleX*g],O[H++]=Y,Y=or[0|V*L.scaleX*g],O[H++]=Y;break;case 3:for(j=!0,this.adobe&&this.adobe.transformCode?j=!0:typeof this.colorTransform!="undefined"&&(j=!!this.colorTransform),W=this.components[0],L=this.components[1],S=this.components[2],R=0;R<w;R++)for(Q=W.lines[0|R*W.scaleY*P],or=L.lines[0|R*L.scaleY*P],rr=S.lines[0|R*S.scaleY*P],V=0;V<F;V++)j?(Y=Q[0|V*W.scaleX*g],T=or[0|V*L.scaleX*g],nr=rr[0|V*S.scaleX*g],f=sr(Y+1.402*(nr-128)),X=sr(Y-.3441363*(T-128)-.71413636*(nr-128)),tr=sr(Y+1.772*(T-128))):(f=Q[0|V*W.scaleX*g],X=or[0|V*L.scaleX*g],tr=rr[0|V*S.scaleX*g]),O[H++]=f,O[H++]=X,O[H++]=tr;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";for(j=!1,this.adobe&&this.adobe.transformCode?j=!0:typeof this.colorTransform!="undefined"&&(j=!!this.colorTransform),W=this.components[0],L=this.components[1],S=this.components[2],I=this.components[3],R=0;R<w;R++)for(Q=W.lines[0|R*W.scaleY*P],or=L.lines[0|R*L.scaleY*P],rr=S.lines[0|R*S.scaleY*P],lr=I.lines[0|R*I.scaleY*P],V=0;V<F;V++)j?(Y=Q[0|V*W.scaleX*g],T=or[0|V*L.scaleX*g],nr=rr[0|V*S.scaleX*g],gr=lr[0|V*I.scaleX*g],yr=255-sr(Y+1.402*(nr-128)),K=255-sr(Y-.3441363*(T-128)-.71413636*(nr-128)),J=255-sr(Y+1.772*(T-128))):(yr=Q[0|V*W.scaleX*g],K=or[0|V*L.scaleX*g],J=rr[0|V*S.scaleX*g],gr=lr[0|V*I.scaleX*g]),O[H++]=255-yr,O[H++]=255-K,O[H++]=255-J,O[H++]=255-gr;break;default:throw"Unsupported color mode"}return O},copyToImageData:function(F){var w=F.width,g=F.height,P=F.data,W=this.getData(w,g),L=0,S=0,I,Q,or,rr,lr,V,R,H,Y;switch(this.components.length){case 1:for(Q=0;Q<g;Q++)for(I=0;I<w;I++)or=W[L++],P[S++]=or,P[S++]=or,P[S++]=or,P[S++]=255;break;case 3:for(Q=0;Q<g;Q++)for(I=0;I<w;I++)R=W[L++],H=W[L++],Y=W[L++],P[S++]=R,P[S++]=H,P[S++]=Y,P[S++]=255;break;case 4:for(Q=0;Q<g;Q++)for(I=0;I<w;I++)lr=W[L++],V=W[L++],or=W[L++],rr=W[L++],R=255-sr(lr*(1-rr/255)+rr),H=255-sr(V*(1-rr/255)+rr),Y=255-sr(or*(1-rr/255)+rr),P[S++]=R,P[S++]=H,P[S++]=Y,P[S++]=255;break;default:throw"Unsupported color mode"}}},D}();d.exports=m;function m(A,b){var U=new Uint8Array(A),_=new s;_.parse(U);var $={width:_.width,height:_.height,data:b?new Uint8Array(_.width*_.height*4):new o(_.width*_.height*4)};return _.copyToImageData($),$._decoder=_,$}}).call(this,u("buffer").Buffer)},{buffer:2}],7:[function(u,d,p){(function(o){function s(A){var b=Math.floor,U=new Array(64),_=new Array(64),$=new Array(64),z=new Array(64),xr,er,ir,vr,D=new Array(65535),B=new Array(65535),ar=new Array(64),cr=new Array(64),sr=[],N=0,F=7,w=new Array(64),g=new Array(64),P=new Array(64),W=new Array(256),L=new Array(2048),S,I=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],or=[0,1,2,3,4,5,6,7,8,9,10,11],rr=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],lr=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function T(n){for(var i=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],a=0;a<64;a++){var c=b((i[a]*n+50)/100);c<1?c=1:c>255&&(c=255),U[I[a]]=c}for(var E=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],h=0;h<64;h++){var v=b((E[h]*n+50)/100);v<1?v=1:v>255&&(v=255),_[I[h]]=v}for(var l=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],k=0,M=0;M<8;M++)for(var y=0;y<8;y++)$[k]=1/(U[I[k]]*l[M]*l[y]*8),z[k]=1/(_[I[k]]*l[M]*l[y]*8),k++}function nr(n,i){for(var a=0,c=0,E=new Array,h=1;h<=16;h++){for(var v=1;v<=n[h];v++)E[i[c]]=[],E[i[c]][0]=a,E[i[c]][1]=h,c++,a++;a*=2}return E}function gr(){xr=nr(Q,or),er=nr(V,R),ir=nr(rr,lr),vr=nr(H,Y)}function yr(){for(var n=1,i=2,a=1;a<=15;a++){for(var c=n;c<i;c++)B[32767+c]=a,D[32767+c]=[],D[32767+c][1]=a,D[32767+c][0]=c;for(var E=-(i-1);E<=-n;E++)B[32767+E]=a,D[32767+E]=[],D[32767+E][1]=a,D[32767+E][0]=i-1+E;n<<=1,i<<=1}}function K(){for(var n=0;n<256;n++)L[n]=19595*n,L[n+256>>0]=38470*n,L[n+512>>0]=7471*n+32768,L[n+768>>0]=-11059*n,L[n+1024>>0]=-21709*n,L[n+1280>>0]=32768*n+8421375,L[n+1536>>0]=-27439*n,L[n+1792>>0]=-5329*n}function J(n){for(var i=n[0],a=n[1]-1;a>=0;)i&1<<a&&(N|=1<<F),a--,F--,F<0&&(N==255?(f(255),f(0)):f(N),F=7,N=0)}function f(n){sr.push(n)}function X(n){f(n>>8&255),f(n&255)}function tr(n,i){var a,c,E,h,v,l,k,M,y=0,G,hr=8,pr=64;for(G=0;G<hr;++G){a=n[y],c=n[y+1],E=n[y+2],h=n[y+3],v=n[y+4],l=n[y+5],k=n[y+6],M=n[y+7];var Fr=a+M,fr=a-M,Er=c+k,Ar=c-k,dr=E+l,br=E-l,Ir=h+v,Lr=h-v,Ur=Fr+Ir,Hr=Fr-Ir,Mr=Er+dr,Rr=Er-dr;n[y]=Ur+Mr,n[y+4]=Ur-Mr;var Jr=(Rr+Hr)*.707106781;n[y+2]=Hr+Jr,n[y+6]=Hr-Jr,Ur=Lr+br,Mr=br+Ar,Rr=Ar+fr;var Kr=(Ur-Rr)*.382683433,Zr=.5411961*Ur+Kr,$r=1.306562965*Rr+Kr,jr=Mr*.707106781,zr=fr+jr,re=fr-jr;n[y+5]=re+Zr,n[y+3]=re-Zr,n[y+1]=zr+$r,n[y+7]=zr-$r,y+=8}for(y=0,G=0;G<hr;++G){a=n[y],c=n[y+8],E=n[y+16],h=n[y+24],v=n[y+32],l=n[y+40],k=n[y+48],M=n[y+56];var ee=a+M,Pr=a-M,ne=c+k,te=c-k,ie=E+l,oe=E-l,ae=h+v,we=h-v,_r=ee+ae,Wr=ee-ae,Sr=ne+ie,Vr=ne-ie;n[y]=_r+Sr,n[y+32]=_r-Sr;var ce=(Vr+Wr)*.707106781;n[y+16]=Wr+ce,n[y+48]=Wr-ce,_r=we+oe,Sr=oe+te,Vr=te+Pr;var se=(_r-Vr)*.382683433,ue=.5411961*_r+se,xe=1.306562965*Vr+se,he=Sr*.707106781,le=Pr+he,fe=Pr-he;n[y+40]=fe+ue,n[y+24]=fe-ue,n[y+8]=le+xe,n[y+56]=le-xe,y++}var Yr;for(G=0;G<pr;++G)Yr=n[G]*i[G],ar[G]=Yr>0?Yr+.5|0:Yr-.5|0;return ar}function j(){X(65504),X(16),f(74),f(70),f(73),f(70),f(0),f(1),f(1),f(0),X(1),X(1),f(0),f(0)}function ur(n,i){X(65472),X(17),f(8),X(i),X(n),f(3),f(1),f(17),f(0),f(2),f(17),f(1),f(3),f(17),f(1)}function O(){X(65499),X(132),f(0);for(var n=0;n<64;n++)f(U[n]);f(1);for(var i=0;i<64;i++)f(_[i])}function C(){X(65476),X(418),f(0);for(var n=0;n<16;n++)f(Q[n+1]);for(var i=0;i<=11;i++)f(or[i]);f(16);for(var a=0;a<16;a++)f(rr[a+1]);for(var c=0;c<=161;c++)f(lr[c]);f(1);for(var E=0;E<16;E++)f(V[E+1]);for(var h=0;h<=11;h++)f(R[h]);f(17);for(var v=0;v<16;v++)f(H[v+1]);for(var l=0;l<=161;l++)f(Y[l])}function x(){X(65498),X(12),f(3),f(1),f(0),f(2),f(17),f(3),f(17),f(0),f(63),f(0)}function Z(n,i,a,c,E){for(var h=E[0],v=E[240],l,k=16,M=63,y=64,G=tr(n,i),hr=0;hr<y;++hr)cr[I[hr]]=G[hr];var pr=cr[0]-a;a=cr[0],pr==0?J(c[0]):(l=32767+pr,J(c[B[l]]),J(D[l]));for(var Fr=63;Fr>0&&cr[Fr]==0;Fr--);if(Fr==0)return J(h),a;for(var fr=1,Er;fr<=Fr;){for(var Ar=fr;cr[fr]==0&&fr<=Fr;++fr);var dr=fr-Ar;if(dr>=k){Er=dr>>4;for(var br=1;br<=Er;++br)J(v);dr=dr&15}l=32767+cr[fr],J(E[(dr<<4)+B[l]]),J(D[l]),fr++}return Fr!=M&&J(h),a}function t(){for(var n=String.fromCharCode,i=0;i<256;i++)W[i]=n(i)}this.encode=function(n,i){new Date().getTime(),i&&r(i),sr=new Array,N=0,F=7,X(65496),j(),O(),ur(n.width,n.height),C(),x();var a=0,c=0,E=0;N=0,F=7,this.encode.displayName="_encode_";for(var h=n.data,v=n.width,l=n.height,k=v*4,M,y=0,G,hr,pr,Fr,fr,Er,Ar,dr;y<l;){for(M=0;M<k;){for(Fr=k*y+M,fr=Fr,Er=-1,Ar=0,dr=0;dr<64;dr++)Ar=dr>>3,Er=(dr&7)*4,fr=Fr+Ar*k+Er,y+Ar>=l&&(fr-=k*(y+1+Ar-l)),M+Er>=k&&(fr-=M+Er-k+4),G=h[fr++],hr=h[fr++],pr=h[fr++],w[dr]=(L[G]+L[hr+256>>0]+L[pr+512>>0]>>16)-128,g[dr]=(L[G+768>>0]+L[hr+1024>>0]+L[pr+1280>>0]>>16)-128,P[dr]=(L[G+1280>>0]+L[hr+1536>>0]+L[pr+1792>>0]>>16)-128;a=Z(w,$,a,xr,ir),c=Z(g,z,c,er,vr),E=Z(P,z,E,er,vr),M+=32}y+=8}if(F>=0){var br=[];br[1]=F+1,br[0]=(1<<F+1)-1,J(br)}return X(65497),new o(sr)};function r(n){if(n<=0&&(n=1),n>100&&(n=100),S!=n){var i=0;n<50?i=Math.floor(5e3/n):i=Math.floor(200-n*2),T(i),S=n}}function e(){var n=new Date().getTime();A||(A=50),t(),gr(),yr(),K(),r(A),new Date().getTime()-n}e()}d.exports=m;function m(A,b){typeof b=="undefined"&&(b=50);var U=new s(b),_=U.encode(A,b);return{data:_,width:A.width,height:A.height}}}).call(this,u("buffer").Buffer)},{buffer:2}]},{},[4]);function Cr(u,d){d.width=u.width,d.height=u.height;const p=d.getContext("2d"),o=new ImageData(new Uint8ClampedArray(u.data),u.width,u.height);p.putImageData(o,0,0)}function Nr(u){u._decoder.components=[];const d=u._decoder.frames[0];for(let p=0;p<d.componentsOrder.length;p++){const o=d.components[d.componentsOrder[p]];u._decoder.components.push({lines:u._decoder.buildComponentData(d,o),scaleX:o.h/d.maxH,scaleY:o.v/d.maxV})}u._decoder.copyToImageData({width:u.width,height:u.height,data:u.data})}function Fe(u,d,p){const o=u.target.getBoundingClientRect();let s=u.clientX-o.left,m=u.clientY-o.top;d._decoder.frames[0].components[1];let A=1;s/=8,m/=8,s/=A,m/=A;let b=p.width/p.offsetWidth,U=p.height/p.offsetHeight;s*=b,m*=U,s=Math.floor(s),m=Math.floor(m);let _=[];try{_=d._decoder.frames[0].components[1].blocks[m][s]}catch($){console.log($)}return{block:_,x:s,y:m}}function ve(u){const d=u._decoder.frames[0].components[1].blocks,p=[];for(let o=0;o<d.length;o++)for(let s=0;s<d[o].length;s++)for(let m=0;m<d[o][s].length;m++)p.push(d[o][s][m]);return p}function me(u,d){const p=u._decoder.frames[0].components[1].blocks;let o=0;for(let s=0;s<p.length;s++)for(let m=0;m<p[s].length;m++)for(let A=0;A<p[s][m].length;A++)p[s][m][A]=d[o],o++}function Br(u){let d="",p=0;for(let o=0;o<8;o++){let s=[];for(let m=0;m<8;m++)s.push(u[p]),p++;d+=s.join(" ")+`
`}return d}function ge(u){for(var d=0;d<u.length;d++)u[d]=[u[d],d];u.sort(function(o,s){return Math.abs(o[0])<Math.abs(s[0])?-1:1}),u.sortIndices=[];for(var p=0;p<u.length;p++)u.sortIndices.push(u[p][1]),u[p]=u[p][0];return u}function Gr(u){return ge(Array.from(u)).sortIndices}const Ee="dct_base.jpeg";async function Ae(){const d=await(await fetch(Ee)).arrayBuffer(),p=jpeg.decode(d,{useTArray:!0}),o=p._decoder.frames[0].components[1].blocks,s=[];for(let A=0;A<o.length;A++)for(let b=0;b<o[A].length;b++)s.push(o[A][b]);for(let A=0;A<s.length;A++){const b=s[A];for(let U=0;U<b.length;U++)U==A?b[U]=200:b[U]=0}Nr(p);const m=document.createElement("canvas");return m.style.imageRendering="pixelated",Cr(p,m),m}function be(u,d){u.ondragenter=function(p){p.preventDefault()},u.ondragover=function(p){p.preventDefault()},u.ondragleave=function(p){p.preventDefault()},u.ondrop=function(p){p.preventDefault();let o=[];if(p.dataTransfer.items){for(var s=0;s<p.dataTransfer.items.length;s++)if(p.dataTransfer.items[s].kind==="file"){var m=p.dataTransfer.items[s].getAsFile();o.push(m)}}else o=p.dataTransfer.files;d(o)}}const Ce="cat_eye.jpeg",wr=document.querySelector("#main"),Tr=document.querySelector("#selected-block"),kr=document.querySelector("#dct-grid"),Dr=document.querySelector("#dct-textbox"),Te=document.querySelector("#reset"),Or=document.querySelector("#slider"),pe=document.querySelector("#reverse");let q={block:null,acValues:null,x:0,y:0,sortedIndices:[],originalAC:[]},qr,de;async function ke(){de=await Ae();const d=await(await fetch(Ce)).arrayBuffer();mr=jpeg.decode(d,{useTArray:!0}),qr=ve(mr),Cr(mr,wr),Tr.width=wr.width,Tr.height=wr.height,Tr.getContext("2d").scale(8,8)}ke();be(wr,async u=>{const d=URL.createObjectURL(u[0]),o=await(await fetch(d)).arrayBuffer();mr=jpeg.decode(o,{useTArray:!0}),qr=ve(mr),Cr(mr,wr),Tr.width=wr.width,Tr.height=wr.height,Tr.getContext("2d").scale(8,8)});let mr;wr.addEventListener("click",function(u){if(!mr)return;const{block:d,x:p,y:o}=Fe(u,mr,wr);if(d.length>0){Dr.value=Br(d),q.block=d,q.x=p*8,q.y=o*8,q.acValues=d.slice(1),q.sortedIndices=Gr(q.acValues),q.originalAC=d.slice(1),Qr();for(let s=0;s<q.sortedIndices.length;s++){const m=q.sortedIndices[s];if(q.acValues[m]!=0){Or.value=s;break}}pe.checked&&(Or.value=0)}Cr(mr,wr),Xr(q.x,q.y)});Dr.oninput=function(){Ie()};Te.onclick=function(){me(mr,qr),Nr(mr),Cr(mr,wr),Xr(q.x,q.y);const u=q.block;u&&u.length>0&&(Dr.value=Br(u)),q.acValues=u.slice(1),q.sortedIndices=Gr(q.acValues),q.originalAC=u.slice(1)};Or.oninput=u=>{if(q.block==null)return;const d=u.target.value,p=pe.checked,o=q.sortedIndices,s=q.acValues,m=q.originalAC;if(p){let A=0;for(let b=o.length-1;b>=0;b--){const U=o[b];A>=d?s[U]=m[U]:s[U]=0,A++}}else{let A=0;for(let b=0;b<o.length;b++){const U=o[b];A>=d?s[U]=m[U]:s[U]=0,A++}}for(let A=0;A<63;A++)q.block[A+1]=q.acValues[A];Qr(),Dr.value=Br(q.block),Nr(mr),Cr(mr,wr),Xr(q.x,q.y)};function Ie(){if(!q.block)return;let u=Dr.value.split(`
`).join(" ").split(" ").map(d=>parseFloat(d));if(u.length>64&&(u=u.slice(0,64)),u.length<64)for(let d=u.length;d<64;d++)u[d]=0;for(let d=0;d<64;d++)q.block[d]=u[d];Nr(mr),Cr(mr,wr),Xr(q.x,q.y),q.acValues=q.block.slice(1),q.sortedIndices=Gr(q.acValues),q.originalAC=q.block.slice(1),Qr()}function Xr(u,d){let p=Tr.getContext("2d");const o=u,s=d,m=8,A=8,b=0,U=0,_=m,$=A;p.clearRect(0,0,wr.width,wr.height),p.drawImage(wr,o,s,m,A,b,U,_,$),p=wr.getContext("2d"),p.strokeStyle="rgb(255, 0, 0)",p.lineWidth=1;const z=1;p.strokeRect(o-z,s-z,m+z,A+z)}function Qr(){let u=[];for(let d=q.sortedIndices.length-1;d>=0;d--){const p=q.sortedIndices[d];q.acValues[p]!=0&&u.push(p)}Ue(u)}function Ue(u){const d=2,p=8+d;kr.width=8*p+20,kr.height=kr.width;const o=kr.getContext("2d");o.clearRect(0,0,kr.width,kr.height);function s(m,A,b){const U=m%8*8,_=Math.floor(m/8)*8,$=8,z=8,xr=A,er=b,ir=$,vr=z;o.drawImage(de,U,_,$,z,xr,er,ir,vr)}for(let m=0;m<u.length;m++){const A=m%8*p+d,b=Math.floor(m/8)*p;s(u[m]+1,A,b)}}
